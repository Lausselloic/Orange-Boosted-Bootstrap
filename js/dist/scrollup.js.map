{"version":3,"file":"scrollup.js","sources":["../src/o-scroll-up.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Boosted (v4.5.0): o-scroll-up.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME               = 'scrollup'\nconst VERSION            = '4.5.0'\nconst DATA_KEY           = 'bs.scrollup'\nconst EVENT_KEY          = `.${DATA_KEY}`\nconst DATA_API_KEY       = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst SCROLLANIMATE      = 500\n\n\nconst Default = {\n  target: ''\n}\n\nconst DefaultType = {\n  target: '(string|element)'\n}\n\nconst EVENT_SCROLL        = `scroll${EVENT_KEY}`\nconst EVENT_CLICK_SCROLL  = `click${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst SELECTOR_SCROLL_TOP = '.o-scroll-up:not(.static)'\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollUp {\n  constructor(element, config) {\n    this._element       = element\n    this._scrollElement = window\n    this._config        = this._getConfig(config)\n\n    $(window).on(EVENT_SCROLL, $.proxy(this._process, this))\n    $(SELECTOR_SCROLL_TOP).on(EVENT_CLICK_SCROLL, $.proxy(this._backToTop, this))\n    $(this._element).addClass('is-fixed d-none')\n    this._process()\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // public\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._scrollElement).off(EVENT_KEY)\n\n    this._element       = null\n    this._scrollElement = null\n  }\n\n\n  // private\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...$(this._element).data(),\n      ...config\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _process() {\n    $(SELECTOR_SCROLL_TOP).toggleClass('d-none', $(this._scrollElement).scrollTop() < Number($(this._scrollElement).height()))\n  }\n\n  _backToTop() {\n    // if target is defined scrollintoview\n    if (this._config.target) {\n      document.querySelector(this._config.target).scrollIntoView({\n        behavior: 'smooth'\n      })\n    } else if (typeof $.animate === 'function') {\n      $('html, body').animate({\n        scrollTop: 0\n      }, SCROLLANIMATE)\n    } else {\n      $('html, body').scrollTop(0)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data) {\n        data = new ScrollUp(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(EVENT_LOAD_DATA_API, () => {\n  const scrollUps = $.makeArray($(SELECTOR_SCROLL_TOP))\n  for (let i = scrollUps.length; i--;) {\n    const $scrollup = $(scrollUps[i])\n    ScrollUp._jQueryInterface.call($scrollup, $scrollup.data())\n  }\n})\n\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = ScrollUp._jQueryInterface\n$.fn[NAME].Constructor = ScrollUp\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return ScrollUp._jQueryInterface\n}\n\nexport default ScrollUp\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","SCROLLANIMATE","Default","target","DefaultType","EVENT_SCROLL","EVENT_CLICK_SCROLL","EVENT_LOAD_DATA_API","SELECTOR_SCROLL_TOP","ScrollUp","element","config","_element","_scrollElement","window","_config","_getConfig","on","proxy","_process","_backToTop","addClass","dispose","removeData","off","constructor","data","Util","typeCheckConfig","toggleClass","scrollTop","Number","height","document","querySelector","scrollIntoView","behavior","animate","_jQueryInterface","each","TypeError","scrollUps","makeArray","i","length","$scrollup","call","Constructor","noConflict"],"mappings":"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"}