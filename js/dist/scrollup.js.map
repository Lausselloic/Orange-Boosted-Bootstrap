{"version":3,"file":"scrollup.js","sources":["../src/o-scroll-up.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Boosted (v4.6.2): o-scroll-up.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'scrollup'\nconst VERSION = '4.6.2'\nconst DATA_KEY = 'bs.scrollup'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst SCROLLANIMATE = 500\n\nconst Default = {\n  target: ''\n}\n\nconst DefaultType = {\n  target: '(string|element)'\n}\n\nconst EVENT_SCROLL = `scroll${EVENT_KEY}`\nconst EVENT_CLICK_SCROLL = `click${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst SELECTOR_SCROLL_TOP = '.o-scroll-up:not(.static)'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollUp {\n  constructor(element, config) {\n    this._element = element\n    this._scrollElement = window\n    this._config = this._getConfig(config)\n\n    $(window).on(EVENT_SCROLL, $.proxy(this._process, this))\n    $(SELECTOR_SCROLL_TOP).on(EVENT_CLICK_SCROLL, $.proxy(this._backToTop, this))\n    $(this._element).addClass('is-fixed d-none')\n    this._process()\n  }\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  // public\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    $(this._scrollElement).off(EVENT_KEY)\n\n    this._element = null\n    this._scrollElement = null\n  }\n\n  // private\n\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...$(this._element).data(),\n      ...config\n    }\n\n    Util.typeCheckConfig(\n      NAME,\n      config,\n      this.constructor.DefaultType\n    )\n\n    return config\n  }\n\n  _process() {\n    $(SELECTOR_SCROLL_TOP).toggleClass('d-none', $(this._scrollElement).scrollTop() < Number($(this._scrollElement).height()))\n  }\n\n  _backToTop() {\n    // if target is defined scrollintoview\n    if (this._config.target) {\n      document.querySelector(this._config.target).scrollIntoView({\n        behavior: 'smooth'\n      })\n    } else if (typeof $.animate === 'function') {\n      $('html, body').animate({\n        scrollTop: 0\n      }, SCROLLANIMATE)\n    } else {\n      $('html, body').scrollTop(0)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data) {\n        data = new ScrollUp(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(window).on(EVENT_LOAD_DATA_API, () => {\n  const scrollUps = $.makeArray($(SELECTOR_SCROLL_TOP))\n  for (let i = scrollUps.length; i--;) {\n    const $scrollup = $(scrollUps[i])\n    ScrollUp._jQueryInterface.call($scrollup, $scrollup.data())\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = ScrollUp._jQueryInterface\n$.fn[NAME].Constructor = ScrollUp\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return ScrollUp._jQueryInterface\n}\n\nexport default ScrollUp\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","SCROLLANIMATE","Default","target","DefaultType","EVENT_SCROLL","EVENT_CLICK_SCROLL","EVENT_LOAD_DATA_API","SELECTOR_SCROLL_TOP","ScrollUp","element","config","_element","_scrollElement","window","_config","_getConfig","on","proxy","_process","_backToTop","addClass","dispose","removeData","off","constructor","data","Util","typeCheckConfig","toggleClass","scrollTop","Number","height","document","querySelector","scrollIntoView","behavior","animate","_jQueryInterface","each","TypeError","scrollUps","makeArray","i","length","$scrollup","call","Constructor","noConflict"],"mappings":"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"}