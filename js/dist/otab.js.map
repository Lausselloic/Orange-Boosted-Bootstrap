{"version":3,"file":"otab.js","sources":["../src/o-tab.js"],"sourcesContent":["/**\n * ------------------------------------------------------------------------------------------------------\n * Boosted (v4.6.2): otab.js\n * Licensed under MIT (https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/master/LICENSE)\n * ------------------------------------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'otab'\nconst VERSION = '4.6.2'\nconst DATA_KEY = 'bs.otab'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\nconst DEFAULT_THRESHOLD = 2\n\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_ACCORDION_LAYOUT = 'accordion-layout'\n\nconst SELECTOR_OTAB_HEADING = '.o-tab-heading'\nconst SELECTOR_OTAB_CONTENT = '.o-tab-content'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Otab {\n  constructor(element) {\n    this._element = element\n    this._addAccessibility()\n\n    if ($(this._element).parent().find(SELECTOR_OTAB_HEADING).length > DEFAULT_THRESHOLD) {\n      $(this._element).parent().addClass(CLASS_NAME_ACCORDION_LAYOUT)\n    }\n  }\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // public\n  show() {\n    const $element = $(this._element)\n\n    if ($element.next().hasClass(CLASS_NAME_SHOW)) {\n      return\n    }\n\n    // from parent remove all tab-content show classes\n    $element.parent().find(SELECTOR_OTAB_CONTENT).removeClass(CLASS_NAME_SHOW)\n    // remove all aria-expanded=true\n    $element.parent().find('[aria-expanded=\"true\"]').attr('aria-expanded', false)\n    // add show class to next tab-content\n    $element.next().addClass(CLASS_NAME_SHOW)\n    // add aria-expanded=true to element\n    $element.attr('aria-expanded', true)\n  }\n\n  // private\n\n  _addAccessibility() {\n    const $tab = $(this._element)\n    const $tabpanel = $tab.next()\n\n    $tab.attr('id', Util.getUID(NAME))\n    $tabpanel.attr('id', Util.getUID(NAME))\n\n    $tab.attr({\n      'aria-controls': $tabpanel.attr('id'),\n      role: 'tab'\n    })\n    $tabpanel.attr({\n      'aria-labelledby': $tab.attr('id'),\n      role: 'tabpanel',\n      tabindex: 0\n    })\n\n    if ($tabpanel.hasClass(CLASS_NAME_SHOW)) {\n      $tab.attr('aria-expanded', true)\n    } else {\n      $tab.attr('aria-expanded', false)\n    }\n  }\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $this = $(this)\n      let data = $this.data(DATA_KEY)\n\n      if (!data) {\n        data = new Otab(this)\n        $this.data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on('DOMContentLoaded', () => {\n    Otab._jQueryInterface.call($(SELECTOR_OTAB_HEADING))\n  })\n  .on(EVENT_CLICK_DATA_API, SELECTOR_OTAB_HEADING, function (event) {\n    event.preventDefault()\n    Otab._jQueryInterface.call($(this), CLASS_NAME_SHOW)\n  })\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Otab._jQueryInterface\n$.fn[NAME].Constructor = Otab\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Otab._jQueryInterface\n}\n\nexport default Otab\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","DEFAULT_THRESHOLD","EVENT_CLICK_DATA_API","CLASS_NAME_SHOW","CLASS_NAME_ACCORDION_LAYOUT","SELECTOR_OTAB_HEADING","SELECTOR_OTAB_CONTENT","Otab","element","_element","_addAccessibility","parent","find","length","addClass","show","$element","next","hasClass","removeClass","attr","$tab","$tabpanel","Util","getUID","role","tabindex","_jQueryInterface","config","each","$this","data","TypeError","document","on","call","event","preventDefault","Constructor","noConflict"],"mappings":"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"}